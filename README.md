# KLess Songs Repository

This is the official song repository for **KLess** - Advanced Piano Autoplay with Cloud Sync.

## ğŸ“‹ Repository Structure

```
repo/
â”œâ”€â”€ README.md                 # This file
â””â”€â”€ songs/
    â”œâ”€â”€ songs.json           # Song metadata (name, filename, BPM)
    â”œâ”€â”€ 7WEEKS               # Raw Lua script (no extension)
    â”œâ”€â”€ GIORNO               # Raw Lua script (no extension)
    â”œâ”€â”€ MEGALOVANIA          # Raw Lua script (no extension)
    â””â”€â”€ ...more songs
```

## ğŸ“ How to Add a New Song

### Step 1: Add the Raw Lua File
1. Create a new file in `repo/songs/` with NO extension
2. Name it with UPPERCASE (e.g., `MY_SONG`)
3. Paste your Lua script content (from MIDI2LUA or manual)
4. File should contain: `bpm = XXX` at the top

Example file: `repo/songs/MY_SONG`
```lua
-- Generated by MIDI2LUA --

bpm = 120

keypress("a", x, bpm)
rest(0.5, bpm)
keypress("s", x, bpm)
rest(0.5, bpm)
...
finishedSong()
```

### Step 2: Add Metadata to songs.json
Edit `repo/songs/songs.json` and add an entry:
```json
{
  "filename": "MY_SONG",
  "name": "My Song Display Name",
  "bpm": 120
}
```

### Step 3: Commit and Push
```bash
git add .
git commit -m "Add: My Song"
git push
```

That's it! KLess clients will see the update on next "Check Updates" click.

## ğŸµ songs.json Format

Each entry must have:
- **filename** - Exact filename of the raw Lua file (uppercase, no extension)
- **name** - Display name shown in KLess UI
- **bpm** - Beats per minute (number only)

```json
[
  {
    "filename": "INTERSTELLAR",
    "name": "Interstellar",
    "bpm": 104
  },
  {
    "filename": "RUSH_E",
    "name": "Rush E",
    "bpm": 80
  }
]
```

## ğŸš€ How KLess Uses This Repo

1. **Client starts** â†’ Loads cached songs locally
2. **User clicks "Check Updates"** â†’ KLess queries this repository
3. **KLess fetches:**
   - `songs.json` - Gets song list and metadata
   - Each song file individually - Gets the Lua script
4. **Data is cached locally** for offline play
5. **If offline** â†’ Uses last cached version automatically

## ğŸ” Client-Side Integration

The KLess client:
- Reads `songs.json` to get song list
- Downloads each song file by filename
- Caches everything locally
- Fallback to cache if offline
- Shows song name + BPM in UI
- Search works on song names only

## ğŸ“¦ Important Notes

- Raw song files should have NO extension
- Filenames must match exactly in `songs.json` 
- Each file must be valid Lua syntax
- BPM value should be a number (not string)
- Keep filenames UPPERCASE for consistency
- No category system - just names and BPM

## ğŸ› ï¸ For Repository Maintainers

### Adding Multiple Songs
1. Drop raw files in `repo/songs/` (no extension)
2. Add corresponding entries to `songs.json`
3. Commit and push
4. Done!

### Removing Songs
1. Delete the raw file from `repo/songs/`
2. Remove entry from `songs.json`
3. Commit and push

### Updating a Song
1. Replace the file with new content
2. Optionally update BPM in `songs.json`
3. Commit and push

## ğŸ“ Support

For issues or song requests, contact the KLess development team.

---

**KLess v1.0.0** - Advanced Piano Autoplay with Cloud Sync
